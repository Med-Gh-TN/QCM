<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android Master Quiz</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        android: {
                            DEFAULT: '#3DDC84', // Official Android Green
                            dark: '#2A9D5C',
                            bg: '#f8f9fa'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .option-card.selected {
            border-color: #3DDC84;
            background-color: #f0fdf4;
            box-shadow: 0 4px 6px -1px rgba(61, 220, 132, 0.4);
        }
        .option-card.correct {
            border-color: #22c55e; /* Green-500 */
            background-color: #dcfce7;
        }
        .option-card.wrong {
            border-color: #ef4444; /* Red-500 */
            background-color: #fee2e2;
        }
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            font-family: monospace;
            padding: 0.75rem;
            border-radius: 0.375rem;
            margin-bottom: 0.5rem;
            overflow-x: auto;
        }
    </style>
</head>
<body class="bg-gray-50 text-slate-800 font-sans min-h-screen flex flex-col">

    <!-- Sticky Header -->
    <header class="sticky top-0 z-50 bg-white shadow-md border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <!-- Android Robot Icon SVG -->
                <svg class="w-8 h-8 text-android" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17.523 15.3414c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4482.9993.9993s-.4482.9997-.9993.9997m-11.046 0c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4482.9993.9993s-.4482.9997-.9993.9997m11.4045-6.02l1.9973-3.4592a.416.416 0 00-.1521-.5676.416.416 0 00-.5676.1521l-2.0223 3.503C15.5902 8.0745 13.8533 7.5 12 7.5c-1.8534 0-3.5902.5745-5.1368 1.4501L4.841 5.4467a.4161.4161 0 00-.5676-.1521.416.416 0 00-.1521.5676l1.9973 3.4592C2.6889 11.1867.344 14.6589.344 18.75H23.656c0-4.0911-2.3449-7.5633-5.7745-9.4286"/>
                </svg>
                <h1 class="text-xl font-bold tracking-tight text-gray-800 hidden md:block">Dev Android <span class="text-android">Expert</span></h1>
            </div>

            <!-- Timer -->
            <div id="timer-display" class="text-xl font-mono font-bold text-gray-700 bg-gray-100 px-3 py-1 rounded border border-gray-300">
                01:30:00
            </div>

            <!-- Controls -->
            <div class="flex gap-2">
                <button onclick="toggleHistory()" class="px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-android transition">
                    üìä Historique
                </button>
                <a href="#" class="px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 transition" download="Android.pdf">
                    üìÑ PDF
                </a>
                <button onclick="confirmRestart()" class="px-3 py-1.5 text-sm font-medium text-red-500 hover:text-red-700 transition">
                    üîÑ Restart
                </button>
            </div>
        </div>
        
        <!-- Progress Bar -->
        <div class="w-full bg-gray-200 h-2">
            <div id="progress-bar" class="bg-android h-2 transition-all duration-300" style="width: 0%"></div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-5xl mx-auto w-full p-4 md:p-6">
        
        <!-- View: Welcome Screen -->
        <div id="view-welcome" class="text-center py-12">
            <h2 class="text-3xl font-bold mb-4">Pr√™t pour l'examen ?</h2>
            <p class="text-gray-600 mb-8 max-w-2xl mx-auto">
                Ce quiz couvre 4 Phases strat√©giques du d√©veloppement Android. 
                Le temps est limit√© √† 1h30. Votre progression est sauvegard√©e automatiquement.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8 text-left max-w-4xl mx-auto">
                <div class="p-4 bg-white rounded shadow border-l-4 border-android">
                    <h3 class="font-bold">Phase 1</h3>
                    <p class="text-sm text-gray-500">Hardware & Intro</p>
                </div>
                <div class="p-4 bg-white rounded shadow border-l-4 border-blue-500">
                    <h3 class="font-bold">Phase 2</h3>
                    <p class="text-sm text-gray-500">Architecture</p>
                </div>
                <div class="p-4 bg-white rounded shadow border-l-4 border-purple-500">
                    <h3 class="font-bold">Phase 3</h3>
                    <p class="text-sm text-gray-500">Dev & UI</p>
                </div>
                <div class="p-4 bg-white rounded shadow border-l-4 border-orange-500">
                    <h3 class="font-bold">Phase 4</h3>
                    <p class="text-sm text-gray-500">Persistance</p>
                </div>
            </div>
            
            <button onclick="startQuiz()" class="bg-android hover:bg-android-dark text-white font-bold py-3 px-8 rounded-lg shadow-lg transform transition hover:scale-105">
                Commencer le Quiz
            </button>
            <div id="resume-alert" class="hidden mt-4 text-blue-600 font-semibold">
                ‚ö†Ô∏è Une session active a √©t√© d√©tect√©e. Vous allez reprendre l√† o√π vous en √©tiez.
            </div>
        </div>

        <!-- View: Quiz Interface -->
        <div id="view-quiz" class="hidden space-y-8">
            <div class="flex justify-between items-end border-b pb-2">
                <h2 id="phase-title" class="text-2xl font-bold text-gray-800">Phase 1 : Fondamentaux</h2>
                <span id="chunk-indicator" class="text-sm text-gray-500">Questions 1-10</span>
            </div>

            <!-- Questions Container -->
            <div id="questions-container" class="space-y-12">
                <!-- Question Item Template (Injected via JS) -->
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between pt-8">
                <button id="btn-prev-chunk" onclick="prevChunk()" class="hidden px-6 py-2 border border-gray-300 rounded text-gray-600 hover:bg-gray-100">
                    Pr√©c√©dent
                </button>
                <button id="btn-validate-chunk" onclick="validateCurrentChunk()" class="ml-auto bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded font-bold shadow">
                    Valider ce bloc
                </button>
                <button id="btn-next-chunk" onclick="nextChunk()" class="hidden ml-auto bg-android hover:bg-android-dark text-white px-8 py-3 rounded font-bold shadow">
                    Suite (Phase suivante ou Bloc suivant) ‚Üí
                </button>
            </div>
        </div>

        <!-- View: Final Dashboard -->
        <div id="view-dashboard" class="hidden">
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-10 text-center mb-8">
                <div class="text-6xl mb-4">üèÅ</div>
                <h2 class="text-3xl font-bold mb-2">R√©sultats de la session</h2>
                <p id="time-taken-display" class="text-gray-500 mb-6">Temps √©coul√© : --:--</p>
                
                <div id="score-message" class="text-xl font-bold mb-8 px-4 py-2 rounded inline-block">
                    <!-- Dynamic Message -->
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8">
                    <div class="bg-gray-50 p-4 rounded border">
                        <div class="text-gray-500 text-sm">Global</div>
                        <div id="score-global" class="text-3xl font-bold text-gray-800">0%</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded border">
                        <div class="text-gray-500 text-sm">Phase 1</div>
                        <div id="score-p1" class="text-2xl font-bold text-gray-800">0%</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded border">
                        <div class="text-gray-500 text-sm">Phase 2</div>
                        <div id="score-p2" class="text-2xl font-bold text-gray-800">0%</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded border">
                        <div class="text-gray-500 text-sm">Phase 3</div>
                        <div id="score-p3" class="text-2xl font-bold text-gray-800">0%</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded border">
                        <div class="text-gray-500 text-sm">Phase 4</div>
                        <div id="score-p4" class="text-2xl font-bold text-gray-800">0%</div>
                    </div>
                </div>

                <button onclick="retakeQuiz()" class="bg-gray-800 hover:bg-gray-900 text-white font-bold py-3 px-8 rounded shadow">
                    Nouvelle Tentative
                </button>
            </div>
        </div>

    </main>

    <!-- History Modal -->
    <div id="modal-history" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-[100]">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Historique des tentatives</h3>
                <button onclick="toggleHistory()" class="text-gray-500 hover:text-black text-2xl">&times;</button>
            </div>
            <div id="history-content" class="space-y-2">
                <!-- History Items -->
            </div>
        </div>
    </div>

    <!-- Script Link -->
    <script src="app.js"></script>
</body>
</html>



